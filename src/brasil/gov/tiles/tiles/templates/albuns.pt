<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="brasil.gov.tiles">
    <body tal:define="tile_id view/id;">
        <div class="album-tile tile-content"
             tal:attributes="id string:album-$tile_id"
             tal:define="albuns view/get_albuns">
            <tal:fields repeat="field view/get_configured_fields">
                <tal:title define="htmltag python:field.get('htmltag', 'h1')"
                           condition="python:field['id']=='title'">
                    <h1 tal:condition="python:htmltag=='h1'"
                        class="title">
                        ${view/data/title}
                    </h1>
                    <h2 tal:condition="python:htmltag=='h2'"
                        class="title">
                        ${view/data/title}
                    </h2>
                    <h3 tal:condition="python:htmltag=='h3'"
                        class="title">
                        ${view/data/title}
                    </h3>
                    <h4 tal:condition="python:htmltag=='h4'"
                        class="title">
                        ${view/data/title}
                    </h4>
                </tal:title>
                <tal:player condition="python:field['id']=='player' and albuns">
                    <div class="slideshow-player">
                        <div class="cycle-player cycle-slideshow"
                             data-cycle-slides="> div"
                             data-cycle-timeout="0"
                             data-allow-wrap="false"
                             data-cycle-fx="fade">
                            <div tal:repeat="album albuns">
                                <tal:image define="scale python:view.scale(album);"
                                           condition="scale">
                                    <a href="${album/absolute_url}">
                                        <img src="${scale/src}" alt="${scale/alt}">
                                    </a>
                                    <div class="title">
                                        ${album/Title}
                                    </div>
                                    <div class="description">
                                        ${album/Description}
                                    </div>
                                    <a href="${album/absolute_url}">
                                        <div class="acesse-o-album">
                                            Acesse o álbum
                                        </div>
                                    </a>
                                </tal:image>
                            </div>
                        </div><!-- cycle-1 -->
                    </div><!-- player -->
                </tal:player>
                <tal:carrossel condition="python:field['id']=='carrossel' and albuns">
                    <div class="slideshow-carrossel">
                        <div class="cycle-carrossel cycle-slideshow"
                             data-cycle-slides="> div"
                             data-cycle-timeout="0"
                             data-cycle-fx="carousel"
                             data-cycle-carousel-fluid="true"
                             data-cycle-prev="#album-${tile_id} .slideshow-carrossel .cycle-prev"
                             data-cycle-next="#album-${tile_id} .slideshow-carrossel .cycle-next"
                             data-allow-wrap="false">
                            <div class="thumb-itens" tal:repeat="album view/get_albuns">
                                <tal:image define="thumbnail python:view.thumbnail(album);"
                                           condition="thumbnail">
                                    <img src="${thumbnail/src}" alt="${thumbnail/alt}">
                                </tal:image>
                            </div>
                        </div><!-- cycle-2 -->
                        <div class="cycle-nagivation">
                            <a href="#" class="cycle-prev">&laquo; Anterior</a>
                            <a href="#" class="cycle-next">Próximo &raquo;</a>
                        </div>
                    </div><!-- carrossel -->
                </tal:carrossel>
                <div tal:condition="not:albuns">
                    Arraste um álbum para popular o tile.
                </div>
                <tal:footer condition="python:field['id']=='footer'">
                    <div class="footer">
                        <a href="${view/data/link_url}">${view/data/link_text}</a>
                    </div>
                </tal:footer>
            </tal:fields>
        </div>
    </body>
</html>
